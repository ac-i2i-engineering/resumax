<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ResuMax</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f9f9f9;
            color: #333;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
.chat-container {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    flex-direction: column;
}

.chat-header {
    background-color: rgb(0, 50, 97);
    color: #fff;
    padding: 10px;
    text-align: center;
    position: sticky;
    top: 0;
    z-index: 1000;
}

.chat-box {
    flex: 1;
    overflow-y: auto;
    padding: 10px;
    border-bottom: 1px solid #ddd;
    display: flex;
    flex-direction: column;
}



.message {
    padding: 10px;
    border-radius: 20px;
    margin-bottom: 10px;
    max-width: 80%;
    word-wrap: break-word;
    display: inline-block;
}

.user-message {
    background-color: #007bff;
    color: #fff;
    align-self: flex-end;
    text-align: right;
}

.other-message {
    background-color: #6c757d;
    color: #fff;
    align-self: flex-start;
    text-align: left;
}

.file-message {
    background-color: #74be71;
    color: #fff;
    align-self: flex-end;
    text-align: right;
    padding: 10px;
    border-radius: 20px;
    margin-bottom: 10px;
    max-width: 80%;
    word-wrap: break-word;
}

.input-container {
    display: flex;
    padding: 10px;
    border-top: 1px solid #ddd;
}

#chat-input {
    flex: 1;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 4px;
    margin-right: 10px;
}

#send-btn, #file-upload-btn {
    padding: 10px;
    border: none;
    background-color: #007bff;
    color: #fff;
    border-radius: 4px;
    cursor: pointer;
}

#file-upload-btn {
    background-color: #6c757d;
    margin-right: 10px;
}
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <h1>ResuMax</h1>
        </div>
        <div class="chat-box" id="chat-box">
            <!-- Dummy messages -->
            <div class="message user-message">Hello! How can I help you today?</div>
            <div class="message other-message">Hi! I need some information about your services.</div>
            <div class="message user-message">Sure, what would you like to know?</div>
            <div class="message other-message">Can you tell me more about your pricing?</div>
        </div>
        <div class="input-container">
            <input type="text" id="chat-input" placeholder="Type a message...">
            <input type="file" id="file-input" style="display: none;">

            <!--currently asking for the file twice-->
            <form method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <input type="file" name="file" id="file" required style="display: none;">
                <button type="button" id="file-upload-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="white" viewBox="0 0 24 24">
                        <path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/>
                    </svg>
                </button>
            </form>
            
            <script>
                document.getElementById('file-upload-btn').addEventListener('click', () => {
                    document.getElementById('file').click();
                });
            </script>
            <button id="send-btn">Send</button>
        </div>
    </div>
    <script>
        document.getElementById('send-btn').addEventListener('click', sendMessage);
document.getElementById('file-upload-btn').addEventListener('click', () => {
    document.getElementById('file-input').click();
});
document.getElementById('file-input').addEventListener('change', uploadFile);
document.getElementById('chat-input').addEventListener('keypress', function(event) {
    if (event.key === 'Enter') {
        sendMessage();
    }
});

function sendMessage() {
    const chatBox = document.getElementById('chat-box');
    const chatInput = document.getElementById('chat-input');
    const message = chatInput.value.trim();

    if (message) {
        const messageElement = document.createElement('div');
        messageElement.classList.add('message', 'user-message');
        messageElement.textContent = message;
        chatBox.appendChild(messageElement);
        chatInput.value = '';
        chatBox.scrollTop = chatBox.scrollHeight;
    }
}

function uploadFile(event) {
    const chatBox = document.getElementById('chat-box');
    const file = event.target.files[0];

    if (file) {
        const fileElement = document.createElement('div');
        fileElement.classList.add('message', 'file-message');
        fileElement.textContent = `File uploaded: ${file.name}`;
        chatBox.appendChild(fileElement);
        chatBox.scrollTop = chatBox.scrollHeight;
    }
}
    </script>
</body>
</html>